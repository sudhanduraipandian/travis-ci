language: csharp
dotnet: 2.2
mono: none
dist: xenial
sudo: required
services:
- docker
script:
- dotnet test CollAction.Tests
- docker build . -f CollAction/Dockerfile -t collaction:latest
after_success:
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
- chmod +x scripts/docker-push.sh
- scripts/docker-push.sh
env:
  global:
  - DISABLE_NPM_BUILD=1
  # AWS_SECRET_ACCESS_KEY (deployment credential)
  - secure: GTLIxr2KVmI4L5TPwbK2YumLyy65ZbXRVwM3BhIX82h+wMB+/jXbN7aWqTPQPhB1D75QJ2PQOP/HDhpMN7CN/9ntOyvF9pZKA/pFj/ZXGuJZcQdax5UU7BHn6CBZ9C2MhSTu4EJBRLMLdC4H4MkRWAL9PinLj0aWgRIwjoNv+R2bmyZepKAEQ8vLH6qUE/fVc/eFtly0/NhlzGxW6KrGhZlRZd5dJLnZ9dXUnUbsTT7Or1Yd/DcJ5EORVFiQvesERO55gdx3WUMkNYpjKiGPlIhK0dRiBjqpZQmGh1SKn+vgDKapeV0Aq7hyiimK/MRzdurviSieqlaKk47F0A//4BpxgdU4XKZK4k092fIx04UCNC8FJAbFOy/3sqm21TH6vzh3k5WhyUHje+LWm1wITSjr/gJirirzQ2DHZaAykhiNoXDR/UyU8MIoM1MaGUi4kYmIFvyYzG+C98LpC6olYEgyPUt0a1nIov/isX2E9dmS1snrtrXiHe7T82ZbL5HBsbKN0IvubiARjzHL561ChCVDxTkR8PQtrO6hjXbvtegDRq5Qoxha5z7X3nr1kcTzOd2hVpTD4NAmM88KKv6XzCDlRptv9UOoy1l6nNFrw/xZDtWdDIN0Z+fJhoJVTcKI2k39DmkljTCIgqeNQfk/ZnwFQrC9aqutva6wVUmJwc0=
  # AWS_ACCESS_KEY_ID (deployment credential)
  - secure: eBWrtiCAFWJrHcz6i1YDZqWlOdhj8pEEKG51h/SEKAT0q08bRgBcePschpTfLiA+OnYcBeiZbbhjFB4EHMvNDEMk8YQA88An8MVoS7v8vU2p9yd8gCW7iTEVY++r5OOF9CXdBzwjxoTOyO4+WGIZA1u7oNeL0FingwR+KvZl8rGhVdrJUmtK88CEP2Y8abE6aYY9TZwBWP7Ej8hsE3Qa3J2f4h7N11oRZAuu/Kzh75raX2/wgxxQEcfqk1TcTM7y43rG2eikbBjwi+RvD0BPAmOTD0aAlwlFdkM3ZxJxgw+/JsdhAx0JOeblFminQfZT6Hiu7fVdolpywOJ4YVxvMYYi34cFTkVEdNV7ARImSWq6ylEL7TWbQkwz44VRYX6WO8vvMu6pzz6eAReKbWTdu/8vk4hWl5kJlfsV/QLDukABnBVgvFnFzfCfoNQ4rDN3uEdbJa2Rwg8uYZtMzgVyQ31Ai96ytw1DYavrlFfVtgr7yegMP6fdGEC4kCRT+JxP8lxaGNToowpsR47Cp08om9h70I4fFkuROhTxpAtJiW/4l9rdfZ+lahjLJeuCz8+JMYmbq6AX0DMTnCRQ98t8hYnLqPZoLqOzhs6lzkkpN63ad817M5AA5PfvVqmPeYytnzqGmjjNrC9tIkrfHwBuOyjdsoqZ9Yset4kKxyP4eVE=
  # MailChimpKey
  - secure: "eq+Iq7+9wJkVI8TI+1mdlAQ0vCJIWmVI/WP6IFq5CRl7FF3hE1UG/SyLQB27LnS7QJHebF82JmXvl7PVHyffsxN6a826bW6Hh4ZZ8XY8gdl5X6RJHre4F8jjUg0zX4TJdgM8K7aDltDv1Iksiloj31hfvqaVgSNjtmW6Qh0afb7oVXEBrxgzDC5O9W0Fg+dzOJlimh77K+H6t0TJO8DONHnLVbgBJvl/RcpcX0HtZ7saHl0T9EVPZ0Xp3r5OGF39IqPzxXawN26l6CAU5wEiaO3KfQsOxlS8MkT7lC6qITqDZImnxhTdd8nnZlya5m29XoC9jm6RH5+LozNLiLDWKf7b36gyMDdgPEP1utmR+cRfg6VH0MQ/FxcWoMNHWXv6HXOvVcFCWuyyeF22GwTc2HFJUg9eSzUHnvL7QxuIWjUAHsnub/fghc1UC/HqJUTQLMRPq4tDjdz7KyCSRFLH60euGppllj6fpIgqVrtoUziBmeGoa13Tm83D5xnJUAzEuzyrx3CUMIhIOIzHnwTQoWhpJYY8LRlg/id2pZTnZFukRHZy3srMDU8Uu97V/gC/7BRXchJ82ZgG1ON3e88kbRuijVb9z4MPFNzHxmWVOpgGS6Z/A0HTmYTPbr15WBPf1OEfi3kaONpBtstwi+dgitlDvQ6dmDKZ8KTOUEiWQAI="
  # S3AwsAccessKeyID
  - secure: "fH8YND8+3cNINDClLBOw1YgkOjbleisr26qYTRvg/2m3nBPOuulJWmxk6OnKaKmwm0XkaF38m7A35kj+o8alw5E0/Y5Lc+KNgpQarnCCj3DRHguDBuzHPHT/iUFnROr5oElhEM9KiyCneLs93rjAgDTCliaGSaJLi28hkoQZPQCL2YrFV91zoeS4eGax6E4M+1NlHDpXxyuPWKcoojOcom2Fe1f1bYidUs/Nw7Uw8Mkg280e29+tdO4yhU83FBNtQeETQHJh7/O68GiQIDptrXv/4kalTq2ATtE/w3n0VP+mBM2gdRTk5dQZZBksk93QaHw+x7THfd+ch8BnMu68n9Iac3sF7AtBhF4qUuwBN0F11PuHXhOSQ8NWWhf63Wz4WPUOR9m+iF5CXHwG68d6K/mLwF47DIPqSxpr/4Oqd1oaIU+LQeD0GKwj1/aknaoQrzJAiNldtEUJ7TyFZIDKD8eCVLM9noQDKAmQlX59rIiTcaOHjoJvgQviUwfv33QU/aq+8EizxGirhdyqOgGZiZ0JjCnECxAm0Q+vZuDsfKqS3NpAh9n837bdDT5MK9JLHgRcisCPYGJYUGb8nZAeNrJR+iSvI4qlThPM/gMjN+PdCsGoRyM84Z0XYFaOWnr3c/u2dK2lwhR2SpdGv6TXj2dVF2sP1yd1Btw2FkIm2dY="
  # S3AwsAccessKey
  - secure: "yp2VZKJ45olSqxclmXkfwEZFj1eesACampgn8WLYA4YdAXsAukd2fveyGEr1mjsEBauRKAYV8KaKQNjLV8Al70cv//GCNfZnPvHGshrutnEjDH6HcMAZTpVaWDgCgMSQ8xZjEBSDX/QvbZtVjMX2ZhH6fIp8qsB8t1J/i5AFlVZTqCg9+yngMFKwLEFRaNFuw9o1BeSjo+raUfd0yLSFAjSAlHU6BQR8D/7Xia34OVP5kekS1PgKCspVTuEeWr1xm99d8N6PT6fZIMyS632oWC9gPujTjAJkd3+o9NRFi7KZAOEqpvc/helY/fe5t0eOyh7KLzjbW1NynURcvtAyke1H6iDyaxm/xKSlIVr7kL1j7KqNvi6gpY0VT5S2I5UaX1HHqS8tv7BrKL2caK+6nRRwCMRlYCXPCA/Mp9q88Pro49CgysKHnIpKGGuvGFTV6pLVJLd8Qi5b1gPw4S8p/afh4eRELdYi6pioK2/8BzDGGHSk3xgtowCTk+v4nK2s22EQBcTU27rNRL6bQHlJzVzxWUyvtyWwgPr7jgNPg6b3MLaYwCmbA18bCRWyIFWhTAtz9NDl3YSXbEoA1lfRZK75qSXXVNsqpYTCI58EnrWV6jWZ/wNcdRxqRykqvQDGXCePvbx8/q0X8onrJeZL2Me50f/YNY3kEqF4QweK0kI="
  # SesAwsAccessKeyId
  - secure: "lpSFAen3cbfwDhQZVDmiv8Ory+r9h9+LFW2othpbLbSnAYYBAbBLBPCnY+sS73S64tyS01ILq9gjOaaQAF2lagZw+S4VnAKkLvG8lVOEgu/I2OXNDAKCEn76Ws2F64j6D+bkwcjaaGo+rU5UVpn8aF1solgBERcxnPSAFmrkP7utq4ZcFpLHTcfy+3CVEoJaM5K3oty/6DgwkOTraPL4c+Zip32164cyX8mlde6YpStOz7fTLdeyGz2faIdi8xt510rNkzDGmwigGx/8RxVKRrn5rUXz+onJ05lLPy8/JZmY8ctSpzGQmJ214geEiX6nblHw+iA6Z2fIU2s9Z+fBdufJieekhw6jDji4qPZ+4yPo/P0ZZaN4OLuhuy3bJf9RNnFSfonHUaYUrjKuSfZicT571LmgdVUMl8UTma7Bh/Yj5KKF3E9XuqthnUMSWDFkv1xXqLYSMY8AEaTyBtBCI+K+oHkpPkVnXOangKaNny5UA7Rcvwtyslx8g3cpwHJekQ8Syq60JkLZIduYKrCkzAh6025e0Z34w4BWM4b0yVbDo8SQ8wqhZeZu0azyD3G1b4ucQOLLnfFAY1TB7X56QPGyCcXIQLyid+q15DEqkaNqNXFjZJzBjxRtaeYhg5GSpXz6rqLLPcVMgm5eCzLH1dv6yTAPFB4P3J7CeXGOQZs="
  # SesAwsAccessKey
  - secure: "BfD7yHNtCgL4tg+WGAOHYphQRy4ndIgKZSrQh9icPpWY7Zvrx9RQcSxKx3kkvChYeBc/cMb7RuyAeQ1B2dbbRiUiYcNima+cy9E1Q2YV2vrGqvluJkmUpJv9zdD1wU2DZsQybMXXLn34HjNXnfs7hNXwUXtwxjhU2mPCzpf73UmfejYpfJ8H481IGzMaQ83wnR1FyvUgOLCyOsydkU06q7Gyh952m1xiMHy7hI6Q6k6sOpZ5ugFDHk1ot50La6grjMPWboga6VyUHIOF4+gawzNNsv9HJDT4+fcAIBYEyIoaPDKw6g9SEy3w/5bxpi62By3+WeU0YFkbBe3HkUhKMjtgeR/IQ2uOF+SO6KfbmZuIcjKbAei7Nwr3oOhOlihQgZxN7bZsZMIX2NcSvCHHwTJTcgjsa8v0Tvj7b/HhmeziBwXKQ23QCnaHq8d05W+MyIRJkzVzzkVbdkdwixc+VG/GHyadQQ+No/Qj66fk4zkW3z8ZLL9WeuoUe4x/MlYwo9ijmiyt/0wM63FHGQZgZjdEAFUPkgQF6YzKgtzj0NHG5rYTO7RybqVcYU3HIWQGw3coA/T9uGXfGqH5tvVGPjO7Sf011MCUXnAszm3xVrozt/zUoe94if8o0w5AD6VlC6HrrjLPhz8q13cEuwJJ/MUKSsu70jNKe0a3q4fBLqc="
  # MailChimpTestListId
  - secure: "VnM9olh/meQmT95mKhPUYQpu4eE//hn7VKL1NZ+pvqJzwHn251k/fSwgxJZxbILvh9pjnbdVJkFaUivvXWjoA9k/e/0Ze+m8KP2+O5vkj3z8dyB/YBz4wtgnCop8LNc9ptVRzh0im3y9gQMIAcYuCeutxd9ptKLbvZX0HYfLFaTNS0wXvPTKiXPPV4D3/b4N2BscSVEbjacmLqVnq/w7PhFlI8FP8lyf4HM3HxcLOhtoXpGkDXV3tY1L5nC71y5ARmTN3/WB6zIZ3QD+byDm282g9C9YAxtM4aQyYC9FPNjaN5RvQgbq3X1PBKVEEqduIesdBg+Cwzh6cXQDew5IM6ulI4Zm+NPWKQAbZnO61DRc59JaxrdAfU3HXVY0ntNSssDPyG1Q6D+kk9ZSXjg6N1+meOJCx5xeiDr+/X2APBgNzEFKFDQmw/Ml3EWKHrJppjx+c+xacL+VxAMOkisqam8Xdf5zeDODcSuoY9aIc57IPfL5YvQ4b1Ac5sLp0dSs/DtHFVK4duciNlE4ad9MgnNsctELdelZaShHj8Q+LWiPY0C9Zf+WrOp/0U8+LYC3r1Jo+31/ZLkZbM3XovUBLg9GnSI3G+kJu5t7sPX8RuBxfSv7jpc5OdpzAmBOY2QFY+QeF7Gcsb/ZXFa6FN2as1Rui7Ta3ikBslEbvCSRoME="
  # S3Region
  - secure: "MCAL7fOLcg1KF11/J2Cnv5hgvX3jHSrggG3Ob6NEh0puZ6AKGyseL1TJrbWPShPO0xGgJSmZDnnva+h0INOdf4VoUa49uiAR/yd2ECC1Sgo5C9Seph/vEZNrLCK2qbuM6zlwst7U5T3vVBon1eDXZTR7JA/n0WH4xzfDJPvANFzu5jhcB5Gand3cDrKm+bRdonLfPTc3+BtsYY0UpIf0jWzSfuEEjJPPwwL6AMtNZcJARhQoaEHm3NkvwZ4nA9ipaSosfgbQi5McLe8dXYAvo0v2yV1Zp1Q/OXMzFVxJOZNzr00WbrvxKmYKBJ5KLmCjf7kUPEfsEyC6y7X5Et2fD+FU7cKidLbBGKCYZZzCJCIeaWjLJQitA4CK6Ehf9d66plPbM/VIvzFkNUVUpWKzfekqj0UiBLObWxQLnyrvYOCIruIP4HTsZDFN+iQUaRJEiV158XEmEtSeD9rhdR8ToMq4k0n8w6GmKCD6sl1qgNh5RzclcbKkvbEBPLW/mfSWZZUdo1MgHrZdsjw4006dRQ/AcqmCAkHczQ73VtLU7Bslwc6yfN3QrqbvNtm9+dzWskhwJQeKQUYzCYZ4yCdfmUY941imZ47khoKcuet93+UZxBfFYfr3LFROHU7PP3XhF13h22gLTbW1URLs1fpIxZybUXawL7/JZQR8uQwnWFE="
  # S3Bucket
  - secure: "zRTbE/yqAU8WUYAbQw0xhQCJ4aFEAlBaOrSWWQB6/nWdxiruJqNdykKFF98eWkfIJahBB9fNe+di8E4ACqcMiHKwddhuQQc6ezXNfC7Ky0gyLvNXW4V9cMsJ9zD5dCvh4j9W470Hhtd0qKdXqFzjE6U4YajgIUt630YK2V/PBUZDZKHK2nv2uqxf8KtTtXv/NfOrAB+Jufateuehc5TfvhFfYvBXZlSHCLLLqSDdtUBZfuZBSF+rPTg/hmD/WH0uqCNVacQ79WdUKSB1H9c19GpJOLsNwYHjrz96J0u4RVzodPmZKa9aXmqnYShQwxWsFNOh/0fXU5UnG2LIV7FXu5x4CGWqQIcawaavwh+L48yXSqmTjBAd8/WCWt0nBh52BvqWu+XnD1Nn0Uc1qY6h7dYlciX+psLgnC3xJ3wN5oSOh3FnVLu7zOuT6M59mXpbYhUiySZGam9wmQB+enL3ZMlD3FnKQ6xNLmE1bPUgszOrapUAstXbV1nM/uuToErc/Eu0xfA+hrH5QMUMNT2DigF5odBFQANVj5SqpPi7Ze3Lo0EF62P7jqBcJQwZa1hbwD19gY3K3Sxg6x9WJgjcOqsNEhg6hVwZDC7AXgsMu3rB9bIZJ7iikXFxM5KMMlJRMBAVpbWioTsTkhKaBVf8Qj00DzStpinIJ0VWtlUIPy8="
  # SesRegion
  - secure: "Cc5JBswsPRDBlTJN/5vDhe7PAJLDxD5oXMkjjsXdBUBmKX06MA868CcrfekaDVbqYrC5pL84NaHKbUJOf8nK4QFXXWgCTe4E+rn8TeYp18+f5tsFmg3oF8iXpWnZS1Ap/zBdX06TGOFgAOUoij9wdRRxEpAnweoY3KfwBRuxeHyWuWVSiU1gymtFmDo0yMEsStbKF8ttMi1Dq9bGdVrQOHHJTqjPVvmiTQhMBGWd0ZWBTfUs+9xT1yBV9PhkWRZ5T3EZWzp3eqhPqV6pz7PBYkH74gIVuH0O7bUDrm+GGzFuh5kl5QPlsjCWKptva39bzT2+w/bbgebvW6hMNLST9olzweeGrAXaF+L+CUwmZS8nSkW6PY8IFG0jeGtcNtgeKzJe3Uftjeg7MWZHPf/Omffbj6KE5N91pnzk8QtbrGY77PRd4ddpnwgHJJvFVRQZJfUhanwlUKex3UjKwpdmnK4x5pfzre9wULyQVfAp2rqJq7ekS7r6vqSP14boProOs4eVp3MrMdUBVSa1UkIntbLYXMT0QrjrpyfroKBayc4I4+FW3bvOpPREtXX/mg/tt8FeHATkBb38PGW+XKKgtwybaQ6XpfNougMmy+HnnnnYZUeP2CvKV3v2VAzrj+YeKPpvRMRjLXzdPdTI7bGlG7t/jYpDJpWabmhFOpZfkQU="
  # FromAddress
  - secure: "wx4jV1ITGFr0SGCECg1ryVgbjyVrzWQMwuh0FwnS4r+2q+obpY5xV/sUZ33dMRyPEIgEJfxtr0ILJEcAAODL+P/UkfAecKAdWxHAUdkshO9rjmWelZg44a6h8KXOmA17tNp8Wwki+PKuYXVibXTgHq8e4BKydmhH4IhifPqIz3XV4e5E9dCGJ/WX5cLLlHvzuJYdYP3cmKXxD4r3+KtpGD1562xakTA9lYVq9Fbv/WkkoRkT+Glxhh4kQwaqUsJKEnmvAMN0THt+NXseSnHtBeECBfKd04A7DSFXpR2VudaMsoQc/N1oIAhuhjt78AfuuNOATNLXJ/v/+u4jNowNI86vklJgWsbtSaG2hUIS75jHAgej2jmxEYoQ4UgpxSV1kAKADTkZe0hM3bM6lrUIpSlwQuAY0OfJqbEyYSWZQU1ilAIVAMhTCk10TTdXRIV33OE+4YS5NYunt35zmBSHeKoN7/hzb06lmJbqPvZi07nrvUQMThPbMq3XDuOY7Ug6jRZjwBwvqe8cba0kAQcbmJEp7v64Lrf3rWuIzjqNEAhIp+U0dGbXL8NoqfldqVuC3A6cClQOGb/KSgcOiP3khBlffjlzUEB9c0vsEpBiBuodHG5TGMXyMG1D0qjo1TuwdjEt/HrQZUI27yjtWVG8Bn8yJodLRZiJwNLddagq0u4="
