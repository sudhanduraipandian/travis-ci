sudo: required
services:
- docker
dist: trusty
env:
  global:
  - DOCKER_COMPOSE_VERSION=1.23.2
  - SERVICE_WAIT_TIMEOUT=120
  - REPORT_REPO_URL=https://repo.cloud.cnaf.infn.it/repository/travis
  - secure: 4a0XwdOU3Q4jMhEQl8IlzvF1f8NLAO70EvbBP+d9DTbbomV5oiZiR7LCEtRX+9QRirdn/P3xWamc9UVZaVZm6CVesUfvamthcNSR3eREWRvEcHNByavASUeQkhW2CQ+aiBgZRLg3WwxNkdHvlE67h0wYHUrQlrCwIhI3HLdnKpwPVS3blZJcRXapHRo+/WAPwHRObjMx6wS3wndDLeGY2MkH3EDtU29bwYSdcoJI0RYPks7vmv8My2ZVr5w6dg1+VEnBVrGKynQexvbsTwc1p1JDPjGZeO9oRElQJfMxtw2bnzwZGP++iATReis4eyEcV9Lu3yxf2FujcqZU184uyinH1zQpaRXTPuUfypLbjuaFdiYsjNoCz15v+2bQLCmdmfYACPZForVu0Ii59dn0Gu4hGV/qlrhcRWjTTBoNXo7eRc7Jvfsyqi1GOnLy/TZMlVvEtDmMTb/aT/xf5fy2AIeTPuBXzTCsHr2PiXSkORIprBgTGBzpd4vktC+2eoxhDgeVsnjX8H9A/2N82YtcXcfX0Z/6BnNbfYCU9HQkA+QPiPyE673cp/IKNxnbDYY5IoNtf72BopD0xPNTzstDwted00ZCDNw+K5q35rXQ2ns2uJa+QXjlAGXlTb9Tj3g0++3nwSz4Q8b9+W75uCMEx3YvmkDUcbciBVaVpdxnx00=
  - secure: p16lUym6n0NarMKSe0TgRCjvqYI4aYYEh7LXzTbjcqasAiNAF+Oo0uwY2ZwcGNSMS6dGPg/LIaPD3OP800Lh5xMC9lRxatB96e0UWk9GfniaQlhQzGJq3O6NWT093fwfWDTnEac/1N+p58jyIctHVtV7SGAvUyXiRpxJFjHWM0XzsB6acUWgTKn6eqgPclCEyrlum81wRG+6f6bJ7WWiOuKIdKXREYKFmMHcIlVypXEL0F+Fybor/i5oTADKn8ybOnaZ0L2AKNZG9dsF9xxYV4YOBhH6H0D5DjIICS3iD/XKHwyf/HV3WTpuBfHN1TNHshUr4akguvy0fULxxDYtIsFQ7NEx0Ea7ybu/CviJTSPu66YGSI4AkIYoIRIR2OJA4KXfV+maVHN3rimThvwGk0UFmY+nDZMaTnuV9pMkDWswTAlXbE32RM3affa//C6Hdt9qy8nelWi0BP87y6SDIjlDXdhWzxZ8PKEh3Vg3iKckXGa2uTf9FLwkNquilVF6zcMCmZKS4fWanEiawJ7M05b4DMV3eCVtYQPCstSvTeplk7sa9xhgGeQz1iYI59CX1pvgz8RVXQAMRvL1JRxjzFDUgdps9fPsLTPnLB63gCBhCpClmNZv+vpDG4TBxG32l7nY9GBKHc7nLIUnNzbEip3E4rxLlFZvfHd8hcPvt6M=
  - secure: LJdonC9S19lfVrHWWRvb/ysZWm1a9Nx9iOS9GQuiA/VSzSgcdaJ947QXqyWtRvCUBrm7qg97LY28CweYYy30srRLlXlsytaOAED+cH3L4GPlUiXlymed9MHngEPeyzigja+vprbc3vrBK7RLX0zM8Fz3wbFzfDbNoyBBjVkUB5raTl5q56Lu4Mkuhzc2hOW8n2Cuz7VvVhlWTGlH8PmFNLGoeHCRk0G9qoOvm6mBjq43+SPO0aVO8qXcUVdKGdh6escP7uFFiC2ekjCxgRUbbis/QOl2g0vpD0VfNzAsGocGrw4cRfZoZ0gKFeZUtDv4n/YyBOgoXkR3zH/aIs/khTIMIwLISEqix6QYkQVrvWI7ALdcBnkbJ5YgjdXSW82Mwb8e0V9ZT6x7TpfbqGMpgCd514umZsAtf3O0gcuUyuEqWU6LmZnyBsSdsfCxpzI3LWHKEsnS/auY/5JZsFvXmyT4nbzE/1HTaTGRsinN5ljEKp/Rh3gI19Xl3lcmTEVtibSnp+sMGbju3PJb1BhWTMPmXcghWdn3bPAJ+Zd3hm9rYPuWHjfHV0i8lZT7hlCJN33gwa8Yii02IIVe+LiTo+uK8bJpM7Vaj6W62mt+GuHHgRTDMoSBUwEpSuecr6Nm85f6gt0VrPZReg0wzI+QVzWw4eurTmwuPrPYhxU+wYc=
  - secure: NBXElN0BSKrUbmRsRbUsMo+Rs3VvfByQoHtkS754y7r1gzWcRmdVruo8BVPEXPdPakZC4ncs/yQgENBrTQlKaXjhksbp8htsnC9Aas/drZCdCNba9OFeflIMVEAngJfrf33/j9DscPGLU2taGthJailGijEN7HY/7BQ7ghfwwsK4KMoB4rHQe9h3R1/uQe+2VQnBMhwLO/1Yn/WWmHkX5UQFGS3Tnn4+gWNj26ngrgQhFAVO77cs1cdij9AHtEHrl/sbIDQp2yXEQn/LcLBbOH9Jl84sds6aKvKrXCtIkEHpJw12LwBYobJHQOUs59GjdnH2buwEJ2Ann9qN38ZTHaG60y9qcXYuBGC5aytN6GVpy6P1gxLr6oqOzgiZH4NQj7aOwfx3nMPk7Gb0dveZwf0uzhF/WXxRS6wxnRw61wJbMTyZOdAz4s3L1LnDd3JG48IhtSetsdBRNNIH7dbdAnR/tCRCnbOvqMvjkKUqkJqLXjyqY8u2PYJRHoicya2tgfssT80r7Jh7gf974pRWcjKzeIcSq24hN4OQydZD/j3V6MQGjY/05OcknZsjdMchHfrkp0lqlwQLTJ6FxNlPsy0B9rlAL0/U5oFTTC7WA+nspwuwAyDJaTyXBxBFmghp0M8MUpWD1JopcAOHE+qZv9utdu9QcQZiqbMdcZGQDZ0=
  matrix:
  - UPGRADE_FROM="" TARGET_RELEASE=nightly
  - UPGRADE_FROM="" TARGET_RELEASE=stable
  - UPGRADE_FROM="" TARGET_RELEASE=beta
  - UPGRADE_FROM=umd TARGET_RELEASE=nightly
  - UPGRADE_FROM=umd TARGET_RELEASE=beta
  - UPGRADE_FROM=umd TARGET_RELEASE=stable
  - UPGRADE_FROM=stable TARGET_RELEASE=nightly
  - UPGRADE_FROM=stable TARGET_RELEASE=beta
before_install:
- sudo rm /usr/local/bin/docker-compose
- curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
- chmod +x docker-compose
- sudo mv docker-compose /usr/local/bin
script:
- bash travis/deploy.sh
notifications:
  slack:
    rooms:
      secure: nNK0tM9+hFKVF50b6yeSgCIdhKjfUlTphO5BIIrtjiJWmTM9J119eVLwN40q851xGeNyu3NdAQyexQ1UM4nDgK/xYlZGcdUZrTlC3O/hGspDEy1NjBytFG9AmIfkHcA9p0+4DYE71UzoWauvfZYAZKmLXeTt8MRcpbo4e9LuojJx62dYWz5+iymBO1FEPNkf+fPFMAxvwJxPzIDjDBwzKgVMFRnIvCz0RuNqr/qeqtdKfKKVQ1/pC9GyyvbHLLdRgmEFaLFiuWknIIySGvG6PpvET4WfNkBTib6f1m9DQ8d5b+KqEkH5LrK+pEjaZWurjylbMvLpuXvSvS5+A0VYqGzSPSfqbFcEo6C7CozWdcF085lNw1S67Eo5j5EyRyjlbWAGZCePrhUnZlqgrMPTirB6Y9NJqrozfo2ZwZGZzQNWZIfl4ABPWjGgjBXhdzDyG2Fy84ajl5fvAFDCCAh/wJaUsTVbwrNkL7MnCtn22Ci/FRwpPz1fjoo9MmZn2U4AIAeiAsRXi7x6pnox9HHeAavl3LIPcgi0OzMXAvCvIlnxkHQ2iZcLhccHB/IvN8K6gdGDwI/cDjuQXwEuncz+0PCyhqGCbDFV9T7X8kplvLw0j+pl8jOBbrAtb72qPh1UggeaYpRid6YpiszLY7+eIR1HFjTYrqx8AENhsVTz9/A=
